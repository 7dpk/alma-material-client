(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{301:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),s=a.n(c),i=a(14),l=a(103),o=a(157),d=a(44),h=a(371),u=a(364),j=a(306),b=a(159),p=a(351),m=a(10),g=a(155),O=a.n(g),x=a(373),f=a(375),y=a(372),v=a(53),S=a.n(v),k=a(156),w=a(49),C=a(359),P=a(376),N=a(353),q=a(4),T="https://student-leaderboard-api-y57renyjuq-el.a.run.app//api/v1/students",E=Object(p.a)((function(e){return{root:{maxWidth:700,margin:"0 auto"}}})),I=w.b({name:w.c("Enter your Name").required("Name is required"),roll:w.a("Enter your roll").min(0).max(65e3).required("Roll is required"),physics:w.a("Enter your marks in Physics").required("Marks in physics is required").min(0).max(100),chemistry:w.a("Enter your marks in chemistry").required("Marks in chemistry is required").min(0).max(100),maths:w.a("Enter your marks in maths").required("Marks in maths is required").min(0).max(100)});function B(e){var t=E();r.a.useEffect((function(){console.log(e)}),[]);var a=e.student,n=e.request,c=Object(k.a)({initialValues:{name:a.name||"",roll:a.roll||"",maths:a.maths||0,physics:a.physics||0,chemistry:a.chemistry||0,total:a.total||0,percentage:a.percentage||0},validationSchema:I,onSubmit:function(e){e.total=parseFloat(e.maths)+parseFloat(e.physics)+parseFloat(e.chemistry),e.percentage=Math.round(e.total/3*100)/100,e.total=e.total.toString(),e.percentage=e.percentage.toString(),console.log(e),"POST"===n&&S.a.post(T,e).then((function(e){console.log(e.data),e.data.sqlMessage?alert(e.data.sqlMessage):alert("Student saved successfully"),localStorage.clear()})).catch((function(e){return console.log(e)})),"PUT"===n&&S.a.put("".concat(T,"/").concat(a.id),e).then((function(e){console.log(e.data),e.data.sqlMessage?alert(e.data.sqlMessage):alert("Student Updated successfully"),localStorage.clear()})).catch((function(e){return console.log(e)}))}});return Object(q.jsx)("div",{children:Object(q.jsx)("form",{onSubmit:c.handleSubmit,children:Object(q.jsxs)(N.a,{className:t.root,container:!0,spacing:3,justify:"center",maxWidth:700,children:[Object(q.jsx)(N.a,{item:!0,md:12,xs:12,children:Object(q.jsx)(P.a,{fullWidth:!0,id:"name",name:"name",label:"Name",value:c.values.name,onChange:c.handleChange,error:c.touched.name&&Boolean(c.errors.name),helperText:c.touched.name&&c.errors.name})}),Object(q.jsx)(N.a,{item:!0,md:12,xs:12,children:Object(q.jsx)(P.a,{fullWidth:!0,id:"roll",name:"roll",label:"Roll",type:"roll",value:c.values.roll,onChange:c.handleChange,error:c.touched.roll&&Boolean(c.errors.roll),helperText:c.touched.roll&&c.errors.roll})}),Object(q.jsx)(N.a,{item:!0,md:4,xs:12,children:Object(q.jsx)(P.a,{fullWidth:!0,id:"physics",name:"physics",label:"Physics",type:"physics",value:c.values.physics,onChange:c.handleChange,error:c.touched.physics&&Boolean(c.errors.physics),helperText:c.touched.physics&&c.errors.physics})}),Object(q.jsx)(N.a,{item:!0,md:4,xs:12,children:Object(q.jsx)(P.a,{fullWidth:!0,id:"chemistry",name:"chemistry",label:"Chemistry",type:"chemistry",value:c.values.chemistry,onChange:c.handleChange,error:c.touched.chemistry&&Boolean(c.errors.chemistry),helperText:c.touched.chemistry&&c.errors.chemistry})}),Object(q.jsx)(N.a,{item:!0,md:4,xs:12,children:Object(q.jsx)(P.a,{fullWidth:!0,id:"maths",name:"maths",label:"Maths",type:"maths",value:c.values.maths,onChange:c.handleChange,error:c.touched.maths&&Boolean(c.errors.maths),helperText:c.touched.maths&&c.errors.maths})}),Object(q.jsx)(N.a,{item:!0,md:12,xs:12,children:Object(q.jsx)(P.a,{fullWidth:!0,id:"total",name:"total",label:"Total",type:"total",value:parseFloat(c.values.maths)+parseFloat(c.values.physics)+parseFloat(c.values.chemistry),error:c.touched.total&&Boolean(c.errors.total),helperText:c.touched.total&&c.errors.total})}),Object(q.jsx)(N.a,{item:!0,md:12,xs:12,children:Object(q.jsx)(P.a,{fullWidth:!0,id:"percentage",name:"percentage",label:"Percentage",type:"percentage",value:Math.round((parseFloat(c.values.maths)+parseFloat(c.values.physics)+parseFloat(c.values.chemistry))/3*100)/100,error:c.touched.percentage&&Boolean(c.errors.percentage),helperText:c.touched.percentage&&c.errors.percentage})}),Object(q.jsx)(N.a,{item:!0,xs:5,sm:3,children:Object(q.jsx)(C.a,{color:"primary",fullWidth:!0,variant:"contained",type:"submit",children:"POST"===n?"Submit":"Update"})})]})})})}var M=a(23),R=a(3),W=a(368),F=a(366),L=a(367),J=a(363),U=a(365),A=a(361),D=a(379),G=a(362),H=a(380),z=a(304),V=a(378),K=a(307),Q=a(381),X=a(369),Y=a(370),Z=a(152),$=a.n(Z),_=a(153),ee=a.n(_),te=a(154),ae=a.n(te),ne=a(377),re=a(360),ce=a(305),se=Object(p.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function ie(e){var t=se();return Object(q.jsx)("div",{children:Object(q.jsx)(ne.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:e.open,onClose:function(){return e.setOpen(!1)},closeAfterTransition:!0,BackdropComponent:re.a,BackdropProps:{timeout:500},children:Object(q.jsx)(ce.a,{in:e.open,children:Object(q.jsxs)("div",{className:t.paper,children:[Object(q.jsx)(j.a,{children:"Update the Student"}),e.children]})})})})}var le="https://student-leaderboard-api-y57renyjuq-el.a.run.app/api/v1/students/";function oe(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function de(e,t){return"desc"===e?function(e,a){return oe(e,a,t)}:function(e,a){return-oe(e,a,t)}}function he(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}var ue=[{id:"name",numeric:!1,disablePadding:!0,label:"Full Name"},{id:"physics",numeric:!0,disablePadding:!1,label:"Physics"},{id:"chemistry",numeric:!0,disablePadding:!1,label:"Chemistry"},{id:"maths",numeric:!0,disablePadding:!1,label:"Maths"},{id:"percentage",numeric:!0,disablePadding:!1,label:"Percentage %"}];function je(e){var t=e.classes,a=e.onSelectAllClick,n=e.order,r=e.orderBy,c=e.numSelected,s=e.rowCount,i=e.onRequestSort;return Object(q.jsx)(A.a,{children:Object(q.jsxs)(G.a,{children:[Object(q.jsx)(J.a,{padding:"checkbox",children:Object(q.jsx)(V.a,{indeterminate:c>0&&c<s,checked:s>0&&c===s,onChange:a,inputProps:{"aria-label":"select all students"}})}),ue.map((function(e){return Object(q.jsx)(J.a,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&n,children:Object(q.jsxs)(H.a,{active:r===e.id,direction:r===e.id?n:"asc",onClick:(a=e.id,function(e){i(e,a)}),children:[e.label,r===e.id?Object(q.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var a}))]})})}var be=Object(p.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(m.d)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),pe=function(e){var t=be(),a=e.selected,n=e.rows,c=e.setRows,s=e.setOpen,l=e.setStudent,o=a.length,h=r.a.useState("selected"),b=Object(i.a)(h,2),p=b[0],m=b[1];return Object(q.jsxs)(u.a,{className:Object(R.a)(t.root,Object(d.a)({},t.highlight,o>0)),children:[o>0?Object(q.jsxs)(j.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[o," ",p]}):Object(q.jsx)(j.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Leaderboard"}),o>0?Object(q.jsxs)("div",{children:[Object(q.jsx)(Q.a,{title:"Delete",children:Object(q.jsx)(K.a,{"aria-label":"delete",children:Object(q.jsx)($.a,{onClick:function(){return function(e,t,a,n){e.forEach((function(r){S.a.delete(le+r).then((function(e){return console.log(e.data)}),localStorage.clear(),a(t.filter((function(t){return!e.includes(t.id)}))),n("deleted")).catch((function(e){return console.log(e)}))}))}(a,n,c,m)}})})}),1===o&&Object(q.jsx)(Q.a,{title:"Edit",children:Object(q.jsx)(K.a,{"aria-label":"edit",color:"primary",children:Object(q.jsx)(ee.a,{onClick:function(){return function(e,t,a,n){n(t.filter((function(t){return t.id===e[0]}))),a(!0)}(a,n,s,l)}})})})]}):Object(q.jsx)(Q.a,{title:"Filter list",children:Object(q.jsx)(K.a,{"aria-label":"filter list",children:Object(q.jsx)(ae.a,{})})})]})},me=Object(p.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function ge(e){var t=me(),a=r.a.useState("desc"),n=Object(i.a)(a,2),c=n[0],s=n[1],l=r.a.useState("percentage"),o=Object(i.a)(l,2),d=o[0],h=o[1],u=r.a.useState([]),j=Object(i.a)(u,2),b=j[0],p=j[1],m=r.a.useState(0),g=Object(i.a)(m,2),O=g[0],x=g[1],f=r.a.useState(!1),y=Object(i.a)(f,2),v=y[0],k=y[1],w=r.a.useState(10),C=Object(i.a)(w,2),P=C[0],N=C[1],T=r.a.useState(!1),E=Object(i.a)(T,2),I=E[0],R=E[1],A=r.a.useState({}),H=Object(i.a)(A,2),K=H[0],Q=H[1],Z=e.searchTerm,$=r.a.useState([]),_=Object(i.a)($,2),ee=_[0],te=_[1];r.a.useEffect((function(){if(void 0===localStorage.rows||"null"===localStorage.getItem("rows"))S.a.get(le).then((function(e){localStorage.setItem("rows",JSON.stringify(e.data)),te(Object(M.a)(e.data)),console.log(ee)})).catch((function(e){return console.log(e)}));else{var e=JSON.parse(localStorage.rows);te(Object.keys(e).map((function(t){return e[t]}))),console.log(ee)}}),[]),r.a.useEffect((function(){if(Z&&void 0!==localStorage.rows&&"null"!==localStorage.getItem("rows")){var e=JSON.parse(localStorage.rows);te(Object.keys(e).map((function(t){return e[t]})).filter((function(e){return e.name.toLowerCase().includes(Z.toLowerCase())})))}else if(void 0!==localStorage.rows&&"null"!==localStorage.getItem("rows")){var t=JSON.parse(localStorage.rows);te(Object.keys(t).map((function(e){return t[e]})))}}),[Z]);var ae=P-Math.min(P,ee.length-O*P);return Object(q.jsxs)("div",{className:t.root,children:[Object(q.jsx)(ie,{open:I,setOpen:R,children:Object(q.jsx)(B,{request:"PUT",student:K[0]})}),Object(q.jsxs)(z.a,{className:t.paper,children:[Object(q.jsx)(pe,{selected:b,rows:ee,setRows:te,setStudent:Q,setOpen:R}),Object(q.jsx)(U.a,{children:Object(q.jsxs)(F.a,{className:t.table,"aria-labelledby":"tableTitle",size:v?"small":"medium","aria-label":"enhanced table",children:[Object(q.jsx)(je,{classes:t,numSelected:b.length,order:c,orderBy:d,onSelectAllClick:function(e){if(e.target.checked){var t=ee.map((function(e){return e.id}));p(t)}else p([])},onRequestSort:function(e,t){s(d===t&&"asc"===c?"desc":"asc"),h(t)},rowCount:ee.length}),ee.length?Object(q.jsxs)(L.a,{children:[he(ee,de(c,d)).slice(O*P,O*P+P).map((function(e,t){var a,n=(a=e.id,-1!==b.indexOf(a)),r="enhanced-table-checkbox-".concat(t);return Object(q.jsxs)(G.a,{hover:!0,onClick:function(t){return function(e,t){var a=b.indexOf(t),n=[];-1===a?n=n.concat(b,t):0===a?n=n.concat(b.slice(1)):a===b.length-1?n=n.concat(b.slice(0,-1)):a>0&&(n=n.concat(b.slice(0,a),b.slice(a+1))),p(n)}(0,e.id)},role:"checkbox","aria-checked":n,tabIndex:-1,selected:n,children:[Object(q.jsx)(J.a,{padding:"checkbox",children:Object(q.jsx)(V.a,{checked:n,inputProps:{"aria-labelledby":r}})}),Object(q.jsx)(J.a,{component:"th",id:r,scope:"row",padding:"none",children:e.name}),Object(q.jsx)(J.a,{align:"right",children:e.physics}),Object(q.jsx)(J.a,{align:"right",children:e.chemistry}),Object(q.jsx)(J.a,{align:"right",children:e.maths}),Object(q.jsx)(J.a,{align:"right",children:e.percentage})]},e.id)})),ae>0&&Object(q.jsx)(G.a,{style:{height:(v?33:53)*ae},children:Object(q.jsx)(J.a,{colSpan:6})})]}):Object(q.jsx)(W.a,{})]})}),Object(q.jsx)(D.a,{rowsPerPageOptions:[10,20,30],component:"div",count:ee.length,rowsPerPage:P,page:O,onChangePage:function(e,t){x(t)},onChangeRowsPerPage:function(e){N(parseInt(e.target.value,10)),x(0)}})]}),Object(q.jsx)(X.a,{control:Object(q.jsx)(Y.a,{checked:v,onChange:function(e){k(e.target.checked)}}),label:"Dense padding"})]})}var Oe=Object(p.a)((function(e){return{root:{flexGrow:1},title:Object(d.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),tabs:{flexGrow:1,alignItems:"center",justifyContent:"center"},search:Object(d.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(m.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(m.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%",visibility:function(e){return e.search}},e.breakpoints.up("xs"),{marginLeft:e.spacing(4),width:"20ch",visibility:function(e){return e.search}}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"}}}));function xe(e){var t=e.children,a=e.value,n=e.index,r=e.setSearch,c=Object(o.a)(e,["children","value","index","setSearch"]);return 0===a&&r("hidden"),1===a&&r("visible"),Object(q.jsx)("div",Object(l.a)(Object(l.a)({role:"tabpanel",hidden:a!==n},c),{},{children:a===n&&Object(q.jsx)(x.a,{p:3,children:Object(q.jsx)(j.a,{children:t})})}))}function fe(){var e=r.a.useState(0),t=Object(i.a)(e,2),a=t[0],n=t[1],c=r.a.useState("hidden"),s=Object(i.a)(c,2),l=s[0],o=s[1],d=r.a.useState(""),p=Object(i.a)(d,2),m=p[0],g=p[1],v=Oe({search:l});return r.a.useEffect((function(){localStorage.clear()}),[]),Object(q.jsxs)("div",{className:v.root,children:[Object(q.jsx)(h.a,{position:"static",children:Object(q.jsxs)(u.a,{children:[Object(q.jsx)(j.a,{className:v.title,variant:"h6",noWrap:!0,children:"Student Leaderboard"}),Object(q.jsxs)(f.a,{className:v.tabs,value:a,onChange:function(e,t){n(t)},"aria-label":"simple tabs example",children:[Object(q.jsx)(y.a,{label:"Enter Marks"}),Object(q.jsx)(y.a,{label:"Leaderboard"})]}),Object(q.jsxs)("div",{className:v.search,children:[Object(q.jsx)("div",{className:v.searchIcon,children:Object(q.jsx)(O.a,{})}),Object(q.jsx)(b.a,{placeholder:"Search\u2026",classes:{root:v.inputRoot,input:v.inputInput},onChange:function(e){return g(e.target.value)},inputProps:{"aria-label":"search"}})]})]})}),Object(q.jsx)(x.a,{children:Object(q.jsx)(xe,{value:a,index:0,setSearch:o,children:Object(q.jsx)(B,{request:"POST",student:{}})})}),Object(q.jsx)(x.a,{children:Object(q.jsx)(xe,{value:a,index:1,setSearch:o,children:Object(q.jsx)(ge,{searchTerm:m})})})]})}s.a.render(Object(q.jsx)(fe,{}),document.getElementById("root"))}},[[301,1,2]]]);
//# sourceMappingURL=main.9cc524bc.chunk.js.map